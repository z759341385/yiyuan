{"remainingRequest":"/Users/zhc/project/yiyuan/node_modules/babel-loader/lib/index.js!/Users/zhc/project/yiyuan/node_modules/ts-loader/index.js??ref--14-2!/Users/zhc/project/yiyuan/node_modules/eslint-loader/index.js??ref--13-0!/Users/zhc/project/yiyuan/src/store/modules/user.ts","dependencies":[{"path":"/Users/zhc/project/yiyuan/src/store/modules/user.ts","mtime":1627978093902},{"path":"/Users/zhc/project/yiyuan/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhc/project/yiyuan/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/zhc/project/yiyuan/node_modules/ts-loader/index.js","mtime":499162500000},{"path":"/Users/zhc/project/yiyuan/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCB7IGxvZ2luQnlDb2RlLCBnZXRVc2VySW5mbyBhcyBfZ2V0VXNlckluZm8gfSBmcm9tICJAL2FwaS91c2VyIjsKaW1wb3J0IHsgc2F2ZVRva2VuLCBzYXZlTG9naW5TdGF0dXMsIHNhdmVVc2VySW5mbywgcmVtb3ZlVG9rZW4sIHJlbW92ZVVzZXJJbmZvLCByZW1vdmVMb2dpblN0YXR1cywgbG9hZExvZ2luU3RhdHVzLCBsb2FkVG9rZW4sIGxvYWRVc2VySW5mbyB9IGZyb20gIkAvdXRpbHMvY2FjaGUiOwp2YXIgc3RhdGUgPSB7CiAgbG9naW5TdGF0dXM6IGxvYWRMb2dpblN0YXR1cygpLAogIHRva2VuOiBsb2FkVG9rZW4oKSwKICB1c2VySW5mbzogbG9hZFVzZXJJbmZvKCkKfTsKdmFyIG11dGF0aW9ucyA9IHsKICBTRVRfVVNFUklORk86IGZ1bmN0aW9uIFNFVF9VU0VSSU5GTyhzdGF0ZSwgdXNlckluZm8pIHsKICAgIHN0YXRlLnVzZXJJbmZvID0gdXNlckluZm87CiAgfSwKICBTRVRfTE9HSU5fU1RBVFVTOiBmdW5jdGlvbiBTRVRfTE9HSU5fU1RBVFVTKHN0YXRlLCBsb2dpblN0YXR1cykgewogICAgc3RhdGUubG9naW5TdGF0dXMgPSBsb2dpblN0YXR1czsKICB9LAogIFNFVF9UT0tFTjogZnVuY3Rpb24gU0VUX1RPS0VOKHN0YXRlLCB0b2tlbikgewogICAgc3RhdGUudG9rZW4gPSB0b2tlbjsKICB9Cn07CnZhciBhY3Rpb25zID0gewogIC8vIOeZu+W9leebuOWFs++8jOmAmui/h2NvZGXojrflj5Z0b2tlbuWSjOeUqOaIt+S/oeaBr++8jOeUqOaIt+agueaNruiHquW3seeahOmcgOaxguWvueaOpeWQjuWPsAogIGxvZ2luV2VjaGF0QXV0aDogZnVuY3Rpb24gbG9naW5XZWNoYXRBdXRoKF9yZWYsIGNvZGUpIHsKICAgIHZhciBjb21taXQgPSBfcmVmLmNvbW1pdDsKICAgIHZhciBkYXRhID0gewogICAgICBjb2RlOiBjb2RlCiAgICB9OwogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgbG9naW5CeUNvZGUoZGF0YSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgLy8g5a2Y55So5oi35L+h5oGv77yMdG9rZW4KICAgICAgICBjb21taXQoIlNFVF9VU0VSSU5GTyIsIHNhdmVVc2VySW5mbyhyZXMuZGF0YSkpOwogICAgICAgIGNvbW1pdCgiU0VUX1RPS0VOIiwgc2F2ZVRva2VuKHJlcy5kYXRhLnRva2VuKSk7CiAgICAgICAgcmVzb2x2ZShyZXMpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICByZWplY3QoZXJyb3IpOwogICAgICB9KTsKICAgIH0pOwogIH0sCiAgLy8g6I635Y+W55So5oi35L+h5oGvCiAgZ2V0VXNlckluZm86IGZ1bmN0aW9uIGdldFVzZXJJbmZvKF9yZWYyKSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZjIuY29tbWl0LAogICAgICAgIHN0YXRlID0gX3JlZjIuc3RhdGU7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICBfZ2V0VXNlckluZm8oKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAvLyDlrZjnlKjmiLfkv6Hmga/vvIx0b2tlbgogICAgICAgIHZhciB1c2VyID0gc3RhdGUudXNlckluZm87CiAgICAgICAgdXNlci51c2VyX2luZm8gPSByZXMuZGF0YTsKICAgICAgICB1c2VyLmluZm8gPSByZXMuZGF0YS5pbmZvOwogICAgICAgIGNvbnNvbGUubG9nKHVzZXIpOwogICAgICAgIGNvbW1pdCgiU0VUX1VTRVJJTkZPIiwgc2F2ZVVzZXJJbmZvKHVzZXIpKTsKICAgICAgICByZXNvbHZlKHJlcyk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIHJlamVjdChlcnJvcik7CiAgICAgIH0pOwogICAgfSk7CiAgfSwKICAvLyDorr7nva7nirbmgIEKICBzZXRMb2dpblN0YXR1czogZnVuY3Rpb24gc2V0TG9naW5TdGF0dXMoX3JlZjMsIHF1ZXJ5KSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZjMuY29tbWl0OwoKICAgIGlmIChxdWVyeSA9PT0gMCB8fCBxdWVyeSA9PT0gMSkgewogICAgICAvLyDkuIrnur/miZPlvIDms6jph4rvvIzmnKzlnLDosIPor5Xms6jph4rmjonvvIzkv53mjIHkv6Hmga/mnIDmlrAKICAgICAgcmVtb3ZlVG9rZW4oKTsKICAgICAgcmVtb3ZlVXNlckluZm8oKTsKICAgIH0gLy8g6K6+572u5LiN5ZCM55qE55m75b2V54q25oCBCgoKICAgIGNvbW1pdCgiU0VUX0xPR0lOX1NUQVRVUyIsIHNhdmVMb2dpblN0YXR1cyhxdWVyeSkpOwogIH0sCiAgLy8g55m75Ye6CiAgZmVkTG9nT3V0OiBmdW5jdGlvbiBmZWRMb2dPdXQoKSB7CiAgICAvLyDliKDpmaR0b2tlbu+8jOeUqOaIt+S/oeaBr++8jOeZu+mZhueKtuaAgQogICAgcmVtb3ZlVG9rZW4oKTsKICAgIHJlbW92ZVVzZXJJbmZvKCk7CiAgICByZW1vdmVMb2dpblN0YXR1cygpOwogIH0KfTsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWVzcGFjZWQ6IHRydWUsCiAgc3RhdGU6IHN0YXRlLAogIG11dGF0aW9uczogbXV0YXRpb25zLAogIGFjdGlvbnM6IGFjdGlvbnMKfTs="},{"version":3,"sources":["/Users/zhc/project/yiyuan/node_modules/eslint-loader/index.js??ref--13-0!/Users/zhc/project/yiyuan/src/store/modules/user.ts"],"names":[],"mappings":"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","sourcesContent":["import { loginByCode, getUserInfo } from \"@/api/user\";\nimport {\n  saveToken,\n  saveLoginStatus,\n  saveUserInfo,\n  removeToken,\n  removeUserInfo,\n  removeLoginStatus,\n  loadLoginStatus,\n  loadToken,\n  loadUserInfo,\n} from \"@/utils/cache\";\nconst state = {\n  loginStatus: loadLoginStatus(), // 登录状态\n  token: loadToken(), // token\n  userInfo: loadUserInfo(), // 用户登录信息\n};\n\nconst mutations = {\n  SET_USERINFO: (state: any, userInfo: any) => {\n    state.userInfo = userInfo;\n  },\n  SET_LOGIN_STATUS: (state: any, loginStatus: any) => {\n    state.loginStatus = loginStatus;\n  },\n  SET_TOKEN: (state: any, token: any) => {\n    state.token = token;\n  },\n};\n\nconst actions = {\n  // 登录相关，通过code获取token和用户信息，用户根据自己的需求对接后台\n  loginWechatAuth({ commit }: any, code: any) {\n    const data = {\n      code: code,\n    };\n    return new Promise((resolve, reject) => {\n      loginByCode(data)\n        .then((res) => {\n          // 存用户信息，token\n          commit(\"SET_USERINFO\", saveUserInfo(res.data));\n          commit(\"SET_TOKEN\", saveToken(res.data.token));\n          resolve(res);\n        })\n        .catch((error) => {\n          reject(error);\n        });\n    });\n  },\n\n  // 获取用户信息\n  getUserInfo({ commit, state }: any) {\n    return new Promise((resolve, reject) => {\n      getUserInfo()\n        .then((res) => {\n          // 存用户信息，token\n          const user = state.userInfo;\n          user.user_info = res.data;\n          user.info = res.data.info;\n          console.log(user);\n          commit(\"SET_USERINFO\", saveUserInfo(user));\n          resolve(res);\n        })\n        .catch((error) => {\n          reject(error);\n        });\n    });\n  },\n  // 设置状态\n  setLoginStatus({ commit }: any, query: any) {\n    if (query === 0 || query === 1) {\n      // 上线打开注释，本地调试注释掉，保持信息最新\n      removeToken();\n      removeUserInfo();\n    }\n    // 设置不同的登录状态\n    commit(\"SET_LOGIN_STATUS\", saveLoginStatus(query));\n  },\n\n  // 登出\n  fedLogOut() {\n    // 删除token，用户信息，登陆状态\n    removeToken();\n    removeUserInfo();\n    removeLoginStatus();\n  },\n};\n\nexport default {\n  namespaced: true,\n  state,\n  mutations,\n  actions,\n};\n"],"sourceRoot":""}]}