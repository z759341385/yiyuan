{"remainingRequest":"/Users/zhc/project/yiyuan/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zhc/project/yiyuan/src/views/departmentInfo/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/zhc/project/yiyuan/src/views/departmentInfo/index.vue","mtime":1635235139726},{"path":"/Users/zhc/project/yiyuan/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhc/project/yiyuan/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/zhc/project/yiyuan/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhc/project/yiyuan/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBIZWFkZXIgZnJvbSAiQC9jb21wb25lbnRzL0hlYWRlci52dWUiOwppbXBvcnQgeyBmaXJlTGlzdCwgZ2V0SG9ub3JhcnlsaXN0LCBnZXREYWlseVJlY29yZGxpc3QsIGdldE1lc3NhZ2VCb2FyZGxpc3QsIGFkZE1lc3NhZ2VCb2FyZCB9IGZyb20gIkAvYXBpL2luZGV4IjsKaW1wb3J0ICJzd2lwZXIvc3dpcGVyLWJ1bmRsZS5jc3MiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkRlcGFydG1lbnRJbmZvIiwKICBjb21wb25lbnRzOiB7IEhlYWRlciB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBpbmZvOiB7fSwKICAgICAgcmVtaW5kbGlzdDogW10sCiAgICAgIGhvbm9yYXJ5bGlzdDogW10sCiAgICAgIGRhaWx5UmVjb3JkbGlzdDogW10sCiAgICAgIGRpYWxvZ1ZpZGVvSW5mbzoge30sCiAgICAgIG1lc3NhZ2VMaXN0OiBbXSwKICAgICAgbWVzc2FnZU9iajoge30sCiAgICAgIGRpYWxvZ1Zpc2libGU6IGZhbHNlLAogICAgICBhZGRNZXNzYWdlQ29udGV4dDogIiIsCiAgICAgIHBhZ2U6IHsKICAgICAgICBwYWdlTm86IDEsCiAgICAgICAgcGFnZVNpemU6IDEwCiAgICAgIH0sCiAgICAgIGxvYWRkaW5nOiBmYWxzZSwKICAgICAgbnVyc2VEZXBJZDoiIiwKICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgY2Fyb3VzZWxIZWlnaHQoKSB7CiAgICAgIGNvbnN0IGlubmVySGVpZ2h0ID0gTnVtYmVyKHdpbmRvdy5pbm5lckhlaWdodCk7CiAgICAgIGNvbnN0IGhlaWdodCA9IChpbm5lckhlaWdodCAtIDE2MCAtIDE1KSAvIDIgLSA2OCAtIDgwOwoKICAgICAgcmV0dXJuIGAke2hlaWdodH1weGA7CiAgICB9CiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5nZXRIb25vcmFyeWxpc3QoKTsKICAgIHRoaXMuZ2V0RGFpbHlSZWNvcmRsaXN0KCk7CiAgICB0aGlzLmdldE1lc3NhZ2VCb2FyZGxpc3QoKTsKICAgIAogIH0sCiAgbW91bnRlZCgpewogICB0aGlzLm51cnNlRGVwSWQgPSB0aGlzLiRyb3V0ZS5xdWVyeS5udXJzZURlcElkOwogIH0sCiAgbWV0aG9kczogewogICAgZ2V0RGF0YSgpIHsKICAgICAgY29uc3QgcGlkID0gdGhpcy4kcm91dGUucXVlcnkubnVyc2VEZXBJZDsKICAgICAgY29uc3QgcmVzID0gZmlyZUxpc3QoeyBudXJzZURlcElkOiBwaWQgfSk7CiAgICAgIHRoaXMuaW5mbyA9IHJlczsKICAgIH0sCiAgICAvLyDojrflj5bojaPoqokKICAgIGdldEhvbm9yYXJ5bGlzdCgpIHsKICAgICAgY29uc3QgcGFyYW1zID0gewogICAgICAgIG51cnNlRGVwSWQ6dGhpcy5udXJzZURlcElkCiAgICAgIH07CiAgICAgIGdldEhvbm9yYXJ5bGlzdChwYXJhbXMpCiAgICAgICAgLnRoZW4ocmVzID0+IHsKICAgICAgICAgIGlmIChyZXMgJiYgcmVzLmxpc3QpIHsKICAgICAgICAgICAgdGhpcy5ob25vcmFyeWxpc3QgPSByZXMubGlzdDsKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIC5jYXRjaChlcnIgPT4ge30pOwogICAgfSwKICAgIC8vIOiOt+WPluaXpeW4uAogICAgZ2V0RGFpbHlSZWNvcmRsaXN0KCkgewogICAgICBjb25zdCBwYXJhbXMgPSB7CiAgICAgICAgbnVyc2VEZXBJZDp0aGlzLm51cnNlRGVwSWQKICAgICAgfTsKICAgICAgZ2V0RGFpbHlSZWNvcmRsaXN0KHBhcmFtcykKICAgICAgICAudGhlbihyZXMgPT4gewogICAgICAgICAgaWYgKHJlcyAmJiByZXMubGlzdCkgewogICAgICAgICAgICB0aGlzLmRhaWx5UmVjb3JkbGlzdCA9IHJlcy5saXN0OwogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKGVyciA9PiB7fSk7CiAgICB9LAoKICAgIC8vIOeVmeiogOadvwogICAgZ2V0TWVzc2FnZUJvYXJkbGlzdCgpIHsKICAgICAgY29uc3QgcGFyYW1zID0gewogICAgICAgIG51cnNlRGVwSWQ6dGhpcy5udXJzZURlcElkLAogICAgICAgIC4uLnRoaXMucGFnZQogICAgICB9OwogICAgICBnZXRNZXNzYWdlQm9hcmRsaXN0KHBhcmFtcykKICAgICAgICAudGhlbihyZXMgPT4gewogICAgICAgICAgaWYgKHJlcy5wYWdlLmxpc3QpIHsKICAgICAgICAgICAgdGhpcy5tZXNzYWdlT2JqID0gcmVzLnBhZ2U7CiAgICAgICAgICAgIHRoaXMubWVzc2FnZUxpc3QgPSByZXMucGFnZS5saXN0OwogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKGVyciA9PiB7fSk7CiAgICB9LAogICAgb3BlblZpZGVvKGl0ZW0pIHsKICAgICAgaWYgKGl0ZW0udmlkZW9VcmwpIHRoaXMuZGlhbG9nVmlzaWJsZSA9IHRydWU7CiAgICAgIHRoaXMuZGlhbG9nVmlkZW9JbmZvID0gaXRlbTsKICAgIH0sCiAgICBoYW5kbGVDbG9zZSgpIHsKICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gZmFsc2U7CiAgICB9LAogICAgYWRkTWVzc2FnZUJvYXJkKCkgewogICAgICBpZiAodGhpcy5hZGRNZXNzYWdlQ29udGV4dCkgewogICAgICAgIGNvbnN0IHBhcmFtcyA9IHsKICAgICAgICAgIG51cnNlRGVwSWQ6dGhpcy5udXJzZURlcElkLAogICAgICAgICAgY29udGVudHM6IHRoaXMuYWRkTWVzc2FnZUNvbnRleHQKICAgICAgICB9OwogICAgICAgIGFkZE1lc3NhZ2VCb2FyZChwYXJhbXMpCiAgICAgICAgICAudGhlbihyZXMgPT4gewogICAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoIueVmeiogOaIkOWKnyIpOwogICAgICAgICAgICB0aGlzLnBhZ2UucGFnZU5vID0gMTsKICAgICAgICAgICAgdGhpcy5hZGRNZXNzYWdlQ29udGV4dCA9ICIiOwogICAgICAgICAgICB0aGlzLmdldE1lc3NhZ2VCb2FyZGxpc3QoKTsKICAgICAgICAgIH0pCiAgICAgICAgICAuY2F0Y2goZXJyID0+IHt9KTsKICAgICAgfQogICAgfSwKICAgIGhhbmRsZUN1cnJlbnRDaGFuZ2UoY3VycmVudCkgewogICAgICB0aGlzLnBhZ2UucGFnZU5vID0gY3VycmVudDsKICAgICAgdGhpcy5nZXRNZXNzYWdlQm9hcmRsaXN0KCk7CiAgICB9CiAgfQp9Owo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/departmentInfo","sourcesContent":["<!--\n * @Author: your name\n * @Date: 2021-10-26 09:14:49\n * @LastEditTime: 2021-10-26 13:53:29\n * @LastEditors: Please set LastEditors\n * @Description: In User Settings Edit\n * @FilePath: /yiyuan/src/views/departmentInfo/index.vue\n-->\n<template>\n  <div class=\"page\">\n    <Header :logo=\"info.logo\" :title=\"info.depName\" :secondTitle=\"info.nurseDepName\"></Header>\n    <div class=\"patients_detail_box flex\">\n      <div class=\"flex5 flex col\">\n        <div class=\"card img_box flex col\">\n          <div class=\"title t_ct\">荣誉照片</div>\n          <div class=\"img am_c\">\n            <el-carousel :interval=\"4000\" type=\"card\" :height=\"carouselHeight\">\n              <el-carousel-item v-for=\"(item, index) in honorarylist\" :key=\"index\">\n                <img width=\"100%\" :src=\"item.picUrl\" alt=\"\" @click=\"openVideo(item)\" />\n              </el-carousel-item>\n            </el-carousel>\n          </div>\n        </div>\n        <div class=\"card img_box flex col\">\n          <div class=\"title t_ct\">日常记录</div>\n          <div class=\"img am_c\">\n            <el-carousel :interval=\"4000\" type=\"card\" :height=\"carouselHeight\">\n              <el-carousel-item v-for=\"(item, index) in dailyRecordlist\" :key=\"index\">\n                <!-- <h3 class=\"medium\">{{ item }}</h3> -->\n                <img :src=\"item.picUrl\" width=\"100%\" @click=\"openVideo(item)\" />\n              </el-carousel-item>\n            </el-carousel>\n          </div>\n        </div>\n      </div>\n      <div class=\"flex2 card flex col ml_40\">\n        <div class=\"operation_box\">\n          <div class=\"title t_ct\">留言板</div>\n          <div class=\"list_box\">\n            <ul class=\"infinite-list\" style=\"overflow:auto\">\n              <li v-for=\"(item, index) in messageList\" :key=\"index\" class=\"infinite-list-item\">\n                <p v-text=\"item.contents\"></p>\n                <p class=\"message-time\" v-text=\"item.createDate\"></p>\n              </li>\n              <li v-if=\"messageList.length === 0\" class=\"message-list-null\"><el-empty description=\"暂无数据\"></el-empty></li>\n            </ul>\n\n            <el-pagination\n              background\n              @current-change=\"handleCurrentChange\"\n              :current-page.sync=\"messageObj.pageNo\"\n              :page-size=\"messageObj.pageSize\"\n              :total=\"messageObj.count\"\n              layout=\"total, prev, pager, next, jumper\"\n            />\n          </div>\n          <div class=\"message-bottom\">\n            <div class=\"message-bottom-input\">\n              <el-input size=\"medium\" v-model=\"addMessageContext\" />\n            </div>\n            <div class=\"message-bottom-button\">\n              <el-button @click=\"addMessageBoard\" size=\"medium\">发送</el-button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <el-dialog :visible.sync=\"dialogVisible\" width=\"850px\" :before-close=\"handleClose\" class=\"department-info-dialog\">\n      <video\n        v-if=\"dialogVisible\"\n        :poster=\"dialogVideoInfo.picUrl\"\n        :src=\"dialogVideoInfo.videoUrl\"\n        width=\"800\"\n        height=\"600\"\n        id=\"js_dialogVideo\"\n        autoplay\n      ></video>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport Header from \"@/components/Header.vue\";\nimport { fireList, getHonorarylist, getDailyRecordlist, getMessageBoardlist, addMessageBoard } from \"@/api/index\";\nimport \"swiper/swiper-bundle.css\";\nexport default {\n  name: \"DepartmentInfo\",\n  components: { Header },\n  data() {\n    return {\n      info: {},\n      remindlist: [],\n      honorarylist: [],\n      dailyRecordlist: [],\n      dialogVideoInfo: {},\n      messageList: [],\n      messageObj: {},\n      dialogVisible: false,\n      addMessageContext: \"\",\n      page: {\n        pageNo: 1,\n        pageSize: 10\n      },\n      loadding: false,\n      nurseDepId:\"\",\n    };\n  },\n  computed: {\n    carouselHeight() {\n      const innerHeight = Number(window.innerHeight);\n      const height = (innerHeight - 160 - 15) / 2 - 68 - 80;\n\n      return `${height}px`;\n    }\n  },\n  created() {\n    this.getHonorarylist();\n    this.getDailyRecordlist();\n    this.getMessageBoardlist();\n    \n  },\n  mounted(){\n   this.nurseDepId = this.$route.query.nurseDepId;\n  },\n  methods: {\n    getData() {\n      const pid = this.$route.query.nurseDepId;\n      const res = fireList({ nurseDepId: pid });\n      this.info = res;\n    },\n    // 获取荣誉\n    getHonorarylist() {\n      const params = {\n        nurseDepId:this.nurseDepId\n      };\n      getHonorarylist(params)\n        .then(res => {\n          if (res && res.list) {\n            this.honorarylist = res.list;\n          }\n        })\n        .catch(err => {});\n    },\n    // 获取日常\n    getDailyRecordlist() {\n      const params = {\n        nurseDepId:this.nurseDepId\n      };\n      getDailyRecordlist(params)\n        .then(res => {\n          if (res && res.list) {\n            this.dailyRecordlist = res.list;\n          }\n        })\n        .catch(err => {});\n    },\n\n    // 留言板\n    getMessageBoardlist() {\n      const params = {\n        nurseDepId:this.nurseDepId,\n        ...this.page\n      };\n      getMessageBoardlist(params)\n        .then(res => {\n          if (res.page.list) {\n            this.messageObj = res.page;\n            this.messageList = res.page.list;\n          }\n        })\n        .catch(err => {});\n    },\n    openVideo(item) {\n      if (item.videoUrl) this.dialogVisible = true;\n      this.dialogVideoInfo = item;\n    },\n    handleClose() {\n      this.dialogVisible = false;\n    },\n    addMessageBoard() {\n      if (this.addMessageContext) {\n        const params = {\n          nurseDepId:this.nurseDepId,\n          contents: this.addMessageContext\n        };\n        addMessageBoard(params)\n          .then(res => {\n            this.$message.success(\"留言成功\");\n            this.page.pageNo = 1;\n            this.addMessageContext = \"\";\n            this.getMessageBoardlist();\n          })\n          .catch(err => {});\n      }\n    },\n    handleCurrentChange(current) {\n      this.page.pageNo = current;\n      this.getMessageBoardlist();\n    }\n  }\n};\n</script>\n<style lang=\"less\">\n.department-info-dialog {\n  .el-dialog {\n    background: #1e3162;\n  }\n}\n</style>\n<style lang=\"less\" scoped>\n.patients_detail_box {\n  margin: 40px;\n  font-size: 20px;\n  height: calc(100vh - 160px);\n  .title {\n    color: #00a3ff;\n    font-weight: 600;\n    font-size: 24px;\n    padding: 20px;\n  }\n\n  .card {\n    box-shadow: 0 0 10px #5389e2 inset;\n    border-radius: 12px;\n    // padding: 40px;\n  }\n  .img_box {\n    height: calc(100% - 240px);\n    padding: 0 40px 40px 40px;\n    margin-bottom: 15px;\n    .img {\n      width: 100%;\n      height: calc(100% - 88px);\n      object-fit: contain;\n    }\n  }\n  .add_record {\n    position: relative;\n    margin-top: 40px;\n    margin-bottom: 80px;\n    box-shadow: 0 0 10px #5389e2 inset;\n    border-radius: 12px;\n    padding: 40px;\n    .title {\n      position: absolute;\n      top: 0;\n      left: 50%;\n      transform: translate(-50%, -50%);\n      background-color: #01004a;\n    }\n  }\n  .operation_box {\n    margin: 0px 0px;\n    font-size: 18px;\n    .title_box {\n      padding: 0 30px;\n      background: #31558b;\n      color: white;\n      .title_item {\n        padding: 15px 10px;\n      }\n    }\n    .list_box {\n      height: calc(100vh - 68px - 51px - 160px);\n      padding: 0 30px;\n      overflow-y: scroll;\n      .list_item {\n        padding: 15px 0;\n        .col_item {\n          padding: 0 10px;\n        }\n      }\n      .infinite-list {\n        height: calc(100vh - 68px - 51px - 160px - 110px);\n        .message-list-null{\n          list-style: none;\n        }\n        li {\n          padding-bottom: 10px;\n        }\n      }\n      .message-time {\n        text-align: right;\n        padding-right: 15px;\n      }\n    }\n    ::v-deep .el-pagination {\n      margin: 0 0 5px;\n    }\n  }\n  // .swiper-container {\n  //   width: 100%;\n  //   height: 100%;\n  // }\n\n  // .swiper-slide {\n  //   text-align: center;\n  //   font-size: 18px;\n  //   background: #fff;\n  //   height: 200px;\n  //   /* Center slide text vertically */\n  //   display: -webkit-box;\n  //   display: -ms-flexbox;\n  //   display: -webkit-flex;\n  //   display: flex;\n  //   -webkit-box-pack: center;\n  //   -ms-flex-pack: center;\n  //   -webkit-justify-content: center;\n  //   justify-content: center;\n  //   -webkit-box-align: center;\n  //   -ms-flex-align: center;\n  //   -webkit-align-items: center;\n  //   align-items: center;\n  // }\n  .el-carousel__item h3 {\n    color: #475669;\n    font-size: 14px;\n    opacity: 0.75;\n    line-height: 200px;\n    margin: 0;\n  }\n\n  .el-carousel__item:nth-child(2n) {\n    background-color: #99a9bf;\n  }\n\n  .el-carousel__item:nth-child(2n + 1) {\n    background-color: #d3dce6;\n  }\n  .message-bottom {\n    width: 100%;\n    padding: 0 20px 0 80px;\n    text-align: center;\n    .message-bottom-input {\n      display: inline-block;\n      width: calc(100% - 80px);\n      text-align: left;\n    }\n    .message-bottom-button {\n      display: inline-block;\n      width: 80px;\n      text-align: right;\n    }\n  }\n}\n</style>\n"]}]}